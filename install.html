<!DOCTYPE html>
<html>
  <head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-60508041-1"></script>

    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-60508041-1');
    </script>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=775" />
    <title>Concourse CI - Install</title>
    <link rel="stylesheet" type="text/css" href="css/normalize.css" />
    <link rel="stylesheet" type="text/css" href="css/pipeline.css" />
    <link rel="stylesheet" type="text/css" href="css/iosevka.css" />
    <link rel="stylesheet" type="text/css" href="css/booklit.css" />
    <link rel="stylesheet" type="text/css" href="css/survey.css" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <link href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700|Roboto+Slab:300,400,700" rel="stylesheet" />
    <script src="js/search.js"></script>
  </head>
  <body>
    <div id="top">
      <div id="survey">
        <span>The Concourse 2018 Community Survey is here and we'd love your <a href="https://docs.google.com/forms/d/e/1FAIpQLScWHuP130rJAcqBJhQtyIUCqbMcY4Qj0beHtfOnWEQugWSuUw/viewform">feedback</a>!</span>
      </div>
      <div class="header">
        <h1><a href="/" class="logo"></a><a href="/">Concourse</a></h1>

        <nav>
          <a href="tutorials.html">tutorial</a>
          <a href="reference.html">reference</a>
          <a href="https://discuss.concourse-ci.org">discuss</a>
          <a href="download.html">download</a>

          <div class="search" id="search"  onclick="gtag('event', 'search-click');">
            <input type="search" class="search-input" placeholder="Search the docs&hellip;" required="required" />
          </div>
        </nav>

        <script type="text/javascript">
          Elm.Main.embed(document.getElementById("search"));
        </script>
      </div>
    </div>
    <div id="content">
      <div class="side">
        




  
  
  
  
  

  
  <div class="context">
    <nav>
      <div class="top">
        
  <a href="index.html" >Docs</a>

      </div>

      <input type="checkbox" class="toggle"  />
      <span class="arrow"></span>
      <div class="children">
        <table>
        
          <tr>
            
              <td class="number-cell" align="right">1&nbsp;</td>
            
            <td class="title-cell">
  <a href="about.html" >About</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">2&nbsp;</td>
            
            <td class="title-cell">
  <a href="setup-and-operations.html" >Setup &amp; Operations</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">3&nbsp;</td>
            
            <td class="title-cell">
  <a href="concepts.html" >Concepts</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">4&nbsp;</td>
            
            <td class="title-cell">
  <a href="tutorials.html" >Tutorials</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">5&nbsp;</td>
            
            <td class="title-cell">
  <a href="reference.html" >Reference</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">6&nbsp;</td>
            
            <td class="title-cell">
  <a href="contribute.html" >Contribute</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">7&nbsp;</td>
            
            <td class="title-cell">
  <a href="community.html" >Community</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">8&nbsp;</td>
            
            <td class="title-cell">
  <a href="trademarks.html" >Trademarks</a>
</td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  

  

  
  <div class="context">
    <nav>
      <div class="top">
        
  <a href="setup-and-operations.html" >Setup &amp; Operations</a>

      </div>

      <input type="checkbox" class="toggle" checked />
      <span class="arrow"></span>
      <div class="children">
        <table>
        
          <tr>
            
              <td class="number-cell" align="right">2.1&nbsp;</td>
            
            <td class="title-cell">
  <a href="download.html" >Download</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">2.2&nbsp;</td>
            
            <td class="title-cell">
  <a href="install.html"  class="self">Install</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">2.3&nbsp;</td>
            
            <td class="title-cell">
  <a href="getting-started.html" >Getting Started</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">2.4&nbsp;</td>
            
            <td class="title-cell">
  <a href="operation.html" >Operation</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">2.5&nbsp;</td>
            
            <td class="title-cell">
  <a href="teams.html" >Teams</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="right">2.6&nbsp;</td>
            
            <td class="title-cell">
  <a href="administration.html" >Administration</a>
</td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  

  

  
  <div class="context">
    <nav>
      <div class="top">
        
  <a href="install.html"  class="self">Install</a>

      </div>

      <input type="checkbox" class="toggle" checked />
      <span class="arrow"></span>
      <div class="children">
        <table>
        
          <tr>
            
              <td class="number-cell" align="left"></td>
            
            <td class="title-cell">
  <a href="install.html#prerequisites" >Prerequisites</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="left"></td>
            
            <td class="title-cell">
  <a href="install.html#quickstart" >Quick Start</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="left"></td>
            
            <td class="title-cell">
  <a href="install.html#auth-config" >Configuring Auth Providers</a>
</td>
          </tr>
        
          <tr>
            
              <td class="number-cell" align="left"></td>
            
            <td class="title-cell">
  <a href="install.html#cluster" >Multi-node Cluster</a>
</td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  






<ul class="improve-docs">
  <li><img src="images/github.svg" /> <a href="https://github.com/concourse/docs">help improve this site</a></li>

  <li><img src="images/booklit.svg" /> powered by <a href="https://vito.github.io/booklit">Booklit</a></li>
</ul>
      </div>
      <div class="page">
        <div class="section" id="section_install">
  
  <h1 class="section-header"><a name="install"></a><span class="section-number">2.2 </span>Install</h1>
  

  <p>Concourse is distributed as a single <code>concourse</code> binary, which contains the logic for running both a <a href="topology.html#web-node"><code>web</code> node</a> and a <a href="topology.html#worker-node"><code>worker</code> node</a>. The binary is fairly self-contained, making it ideal for tossing onto a VM by hand or orchestrating it with Docker, Kubernetes, or other ops tooling.</p><p>For the sake of brevity and clarity, this document will focus solely on the <code>concourse</code> binary. Documentation for other platforms is available localized to their GitHub repository, as linked to by the <a href="download.html">Download</a> page.</p><em><p>Note: this document is not an exhaustive reference for the <code>concourse</code> CLI! Consult the <code>--help</code> output if you&#39;re looking for a knob to turn.</p></em>

  
    
      <div class="section" id="section_prerequisites">
  
  <h2 class="section-header"><a name="prerequisites"></a>Prerequisites</h2>
  

  <ul>

  <li><p>Grab the appropriate binary for your platform from the <a href="download.html">downloads</a> section.</p></li>

  <li><p>On Linux you&#39;ll need kernel v3.19 or later, with user namespace support enabled. Windows and Darwin don&#39;t really need anything special.</p></li>

  <li><p>A PostgresSQL 9.5&#43; server running somewhere with an empty database created. If you&#39;re going to run a server yourself, refer to your platform or Linux distribution&#39;s installation instructions; we can&#39;t feasibly maintain the docs for this subject ourselves.</p></li>

</ul>

  
    
  
</div>
    
      <div class="section" id="section_quickstart">
  
  <h2 class="section-header"><a name="quickstart"></a>Quick Start</h2>
  

  <p>Before you spend time getting a <a href="install.html#cluster">cluster</a> up and running, you might want to just kick the tires a bit and run everything at once. This can be achieved with the <code>quickstart</code> command:</p><div class="highlight"><pre style="">concourse quickstart <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --add-local-user myuser:mypass <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-local-user myuser <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --external-url http://my-ci.example.com <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --worker-work-dir /opt/concourse/worker
</pre>
</div><p>This command is shorthand for running a single <a href="topology.html#web-node"><code>web</code> node</a> and <a href="topology.html#worker-node"><code>worker</code> node</a> on the same machine, auto-wired to trust each other. We&#39;ve also configured some local auth for the <a href="main-team.html"><code>main</code> team</a> - you may want to change that (see <a href="authentication.html">Configuring Team Auth</a>).</p><p>So far we&#39;ve assumed that you have a local PostgreSQL server running on the default port (<code>5432</code>) with an <code>atc</code> database, accessible by the current UNIX user. If your database lives elsewhere, just specify the <code>--postgres-*</code> flags (consult <code>concourse quickstart --help</code> for more information).</p><p>The addition of the <code>--external-url</code> flag is not technically necessary, so if you&#39;re just testing things it&#39;s safe to omit it. Concourse uses it as a base when generating URLs to itself, so you won&#39;t want those to be the default <code>http://127.0.0.1:8080</code> URL when you&#39;re developing on a different machine than the server.</p>

  
    
  
</div>
    
      <div class="section" id="section_auth-config">
  
  <h2 class="section-header"><a name="auth-config"></a>Configuring Auth Providers</h2>
  

  <p>An operator will need to provide the following information to <code>concourse web</code> upon startup:</p><ul>

  <li><p><a href="install.html#local-auth-config">Locally configured</a> users</p></li>

  <li><p>Third-party auth providers (e.g. <a href="install.html#github-auth-config">GitHub Auth</a>, <a href="install.html#cf-auth-config">CF Auth</a>, etc.)</p></li>

  <li><p>Users who should be members of the <a href="main-team.html"><code>main</code> team</a> (either local or from auth providers)</p></li>

</ul>

  
    
      <div class="section" id="section_local-auth-config">
  
  <h3 class="section-header"><a name="local-auth-config"></a>Local Auth</h3>
  

  <p>In order to add new users to the system, you can supply the <code>--add-local-user</code> flag to the <code>concourse web</code> subcommand like so:</p><div class="highlight"><pre style="">concourse web <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --add-local-user myuser:mypass
</pre>
</div><p>This will allow someone to log in with the username <code>myuser</code> and password <code>mypass</code>. Note that this user doesn&#39;t intrinsically have access to anything - they must be granted access on a team-by-team basis (see <a href="teams.html">Teams</a>).</p>

  
    
      <div class="section" id="section_adding-local-users-to-the-main-team">
  
  <h4 class="section-header"><a name="adding-local-users-to-the-main-team"></a>Adding Local Users to the <code>main</code> Team</h4>
  

  <p>Once you have added the user <code>myuser</code>, you can add them to the <a href="main-team.html"><code>main</code> team</a>:</p><div class="highlight"><pre style="">concourse web <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  ...
  --main-team-local-user myuser
</pre>
</div>

  
    
  
</div>
    
  
</div>
    
      <div class="section" id="section_github-auth-config">
  
  <h3 class="section-header"><a name="github-auth-config"></a>GitHub Auth</h3>
  

  <p>A Concourse server can authenticate against GitHub to take advantage of their permission model and other security improvements in their infrastructure.</p>

  
    
      <div class="section" id="section_creating-a-github-application">
  
  <h4 class="section-header"><a name="creating-a-github-application"></a>Creating a GitHub application</h4>
  

  <p>First you need to <a href="https://github.com/settings/applications/new">create an OAuth application on GitHub</a>.</p><p>The callback URL will be the external URL of your Concourse server with <code>/sky/issuer/callback</code> appended. For example, Concourse&#39;s own CI server&#39;s callback URL would be <code>https://ci.concourse-ci.org/sky/issuer/callback</code>.</p>

  
    
  
</div>
    
      <div class="section" id="section_configuring-the-client">
  
  <h4 class="section-header"><a name="configuring-the-client"></a>Configuring the client</h4>
  

  <p>You will be given a Client ID and a Client Secret for your new application. These will then be passed as the following flags to <code>concourse web</code>:</p><ul>

  <li><p><code>--github-client-id=CLIENT_ID</code></p></li>

  <li><p><code>--github-client-secret=CLIENT_SECRET</code></p></li>

</ul><p>Note that the client must be created under an <em>organization</em> if you want to authorize users based on organization/team membership. If the client is created under a personal account, only individual users can be authorized.</p><p>Here&#39;s a full example:</p><div class="highlight"><pre style="">concourse web <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --github-client-id CLIENT_ID <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --github-client-secret CLIENT_SECRET
</pre>
</div><p>If you&#39;re configuring GitHub Enterprise, you&#39;ll also need to set the following flags:</p><ul>

  <li><p><code>--github-host=github.example.com</code></p></li>

  <li><p><code>--github-ca-cert=/tmp/some-cert</code></p></li>

</ul><p>The GitHub Enterprise host should not contain a scheme, or a trailing slash.</p>

  
    
  
</div>
    
      <div class="section" id="section_adding-github-users-to-the-main-team">
  
  <h4 class="section-header"><a name="adding-github-users-to-the-main-team"></a>Adding GitHub Users to the <code>main</code> Team</h4>
  

  <p>Once you have added the GitHub auth connector, you can specify a GitHub Organization, GitHub Team, and/or GitHub User to the <a href="main-team.html"><code>main</code> team</a>.</p><div class="highlight"><pre style="">concourse web <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  ... <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-github-org=ORG_NAME <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-github-team=ORG_NAME:TEAM_NAME <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-github-user=USERNAME
</pre>
</div>

  
    
  
</div>
    
  
</div>
    
      <div class="section" id="section_cf-auth-config">
  
  <h3 class="section-header"><a name="cf-auth-config"></a>CF Auth</h3>
  

  <p>Cloud Foundry (CF) Auth can be used for operators who wish to authenticate their users configured against their Cloud Foundry instance via the UAA product.</p>

  
    
      <div class="section" id="section_creating-the-client">
  
  <h4 class="section-header"><a name="creating-the-client"></a>Creating the client</h4>
  

  <p>You&#39;ll first need to create a client for Concourse in UAA.</p><p>The callback URL will be the external URL of your Concourse server with <code>/sky/issuer/callback</code> appended. For example, Concourse&#39;s own CI server&#39;s callback URL would be <code>https://ci.concourse-ci.org/sky/issuer/callback</code>.</p><p>The client should look something like this, under <a href="http://bosh.io/jobs/uaa?source=github.com/cloudfoundry/uaa-release&amp;version=13#p=uaa.clients"><code>uaa.clients</code></a>:</p><div class="highlight"><pre style="">concourse:<span style="color:#e6e7e8">
</span><span style="color:#e6e7e8">  </span>id:<span style="color:#e6e7e8"> </span>my-client-id<span style="color:#e6e7e8">
</span><span style="color:#e6e7e8">  </span>secret:<span style="color:#e6e7e8"> </span>my-client-secret<span style="color:#e6e7e8">
</span><span style="color:#e6e7e8">  </span>scope:<span style="color:#e6e7e8"> </span>openid,cloud_controller.read<span style="color:#e6e7e8">
</span><span style="color:#e6e7e8">  </span>authorized-grant-types:<span style="color:#e6e7e8"> </span><span style="color:#e67e22">&#34;authorization_code,refresh_token&#34;</span><span style="color:#e6e7e8">
</span><span style="color:#e6e7e8">  </span>access-token-validity:<span style="color:#e6e7e8"> </span><span style="color:#1abc9c;font-weight:bold">3600</span><span style="color:#e6e7e8">
</span><span style="color:#e6e7e8">  </span>refresh-token-validity:<span style="color:#e6e7e8"> </span><span style="color:#1abc9c;font-weight:bold">3600</span><span style="color:#e6e7e8">
</span><span style="color:#e6e7e8">  </span>redirect-uri:<span style="color:#e6e7e8"> </span>https://concourse.example.com/sky/issuer/callback<span style="color:#e6e7e8">
</span><span style="color:#e6e7e8"></span></pre>
</div>

  
    
  
</div>
    
      <div class="section" id="section_configuring-the-client">
  
  <h4 class="section-header"><a name="configuring-the-client"></a>Configuring the client</h4>
  

  <p>You will be given a Client ID and a Client Secret for your new application. These will then be passed as the following flags to <code>concourse web</code>:</p><ul>

  <li><p><code>--cf-client-id=CLIENT_ID</code></p></li>

  <li><p><code>--cf-client-secret=CLIENT_SECRET</code></p></li>

</ul><p>You will also need to configure your base API URL for CF. We will use this url to discover information used for authentication.</p><ul>

  <li><p><code>--cf-api-url=CF_API_URL</code></p></li>

</ul><p>Here&#39;s a full example:</p><div class="highlight"><pre style="">concourse web <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --cf-client-id CLIENT_ID <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --cf-client-secret CLIENT_SECRET <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --cf-api-url CF_API_URL
</pre>
</div>

  
    
  
</div>
    
      <div class="section" id="section_adding-cf-users-to-the-main-team">
  
  <h4 class="section-header"><a name="adding-cf-users-to-the-main-team"></a>Adding CF Users to the <code>main</code> Team</h4>
  

  <p>Once you have added the CF auth connector you can add a CF Org, CF Space, CF Space GUID and/or CF User to the <a href="main-team.html"><code>main</code> team</a>.</p><div class="highlight"><pre style="">concourse web <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  ... <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-cf-org=ORG_NAME <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-cf-space=ORG_NAME:SPACE_NAME <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-cf-space-guid=SPACE_GUID <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-cf-user=USERNAME
</pre>
</div>

  
    
  
</div>
    
  
</div>
    
      <div class="section" id="section_generic-oidc-config">
  
  <h3 class="section-header"><a name="generic-oidc-config"></a>Generic OIDC</h3>
  

  <p>If your auth provider adheres to the OIDC specification then you should use this provider. Unlike the oAuth provider you don&#39;t need to provide the <code>auth-url</code>, <code>token-url</code> and <code>userinfo-url</code>. Instead you can simply provide an <code>issuer-url</code> and the system will query the <code>.well-known/openid-configuration</code> endpoint to discover all the information it needs.</p>

  
    
      <div class="section" id="section_creating-the-client">
  
  <h4 class="section-header"><a name="creating-the-client"></a>Creating the client</h4>
  

  <p>You&#39;ll first need to create a client with your OIDC provider.</p><p>The callback URL will be the external URL of your Concourse server with <code>/sky/issuer/callback</code> appended. For example, Concourse&#39;s own CI server&#39;s callback URL would be <code>https://ci.concourse-ci.org/sky/issuer/callback</code>.</p>

  
    
  
</div>
    
      <div class="section" id="section_configuring-the-client">
  
  <h4 class="section-header"><a name="configuring-the-client"></a>Configuring the client</h4>
  

  <p>Configuring generic OIDC for X company&#39;s internal OIDC service may look something like:</p><div class="highlight"><pre style="">concourse web <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --oidc-display-name=<span style="color:#e74c3c">&#39;X&#39;</span> <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --oidc-client-id=CLIENT_ID <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --oidc-client-secret=CLIENT_SECRET <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --oidc-issuer=https://oidc.example.com
</pre>
</div>

  
    
  
</div>
    
      <div class="section" id="section_adding-oidc-users-to-the-main-team">
  
  <h4 class="section-header"><a name="adding-oidc-users-to-the-main-team"></a>Adding OIDC Users to the <code>main</code> Team</h4>
  

  <p>Once you have added the OIDC auth connector you can add a Group and/or User to the <a href="main-team.html"><code>main</code> team</a>.</p><div class="highlight"><pre style="">concourse web <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  ... <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-oidc-group=GROUP_NAME <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-oidc-user=USERNAME
</pre>
</div>

  
    
  
</div>
    
  
</div>
    
      <div class="section" id="section_generic-oauth-config">
  
  <h3 class="section-header"><a name="generic-oauth-config"></a>Generic oAuth</h3>
  

  <p>If your auth provider supports oAuth2 but doesn&#39;t adhere to the OIDC specification then you should be using this provider. It&#39;s mostly the same as the OIDC provider except it gives you more control over specifying the full set of authorization endpoints (<code>auth-url</code>, <code>token-url</code>).</p>

  
    
      <div class="section" id="section_creating-the-client">
  
  <h4 class="section-header"><a name="creating-the-client"></a>Creating the client</h4>
  

  <p>First you&#39;ll need to create a client with your oAuth provider.</p><p>The callback URL will be the external URL of your Concourse server with <code>/sky/issuer/callback</code> appended. For example, Concourse&#39;s own CI server&#39;s callback URL would be <code>https://ci.concourse-ci.org/sky/issuer/callback</code>.</p>

  
    
  
</div>
    
      <div class="section" id="section_configuring-the-client">
  
  <h4 class="section-header"><a name="configuring-the-client"></a>Configuring the client</h4>
  

  <p>Configuring generic oAuth for X company&#39;s internal oAuth service may look something like:</p><div class="highlight"><pre style="">concourse web <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --oauth-display-name=<span style="color:#e74c3c">&#39;X&#39;</span> <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --oauth-client-id=CLIENT_ID <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --oauth-client-secret=CLIENT_SECRET <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --oauth-auth-url=https://oauth.example.com/oauth2/auth <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --oauth-token-url=https://oauth.example.com/oauth2/token <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --oauth-userinfo-url=https://oauth.example.com/oauth2/userinfo
</pre>
</div>

  
    
  
</div>
    
      <div class="section" id="section_adding-oauth-users-to-the-main-team">
  
  <h4 class="section-header"><a name="adding-oauth-users-to-the-main-team"></a>Adding OAuth Users to the <code>main</code> Team</h4>
  

  <p>Once you have added the OAuth auth connector you can add a Group and/or User to the <a href="main-team.html"><code>main</code> team</a>.</p><div class="highlight"><pre style="">concourse web <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  ... <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-oidc-group=GROUP_NAME <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-oidc-user=USERNAME
</pre>
</div>

  
    
  
</div>
    
  
</div>
    
      <div class="section" id="section_future-providers">
  
  <h3 class="section-header"><a name="future-providers"></a>Future providers</h3>
  

  <p>Concourse uses a fork of <a href="https://github.com/coreos/dex">coreos/dex</a> for its authentication. Adding a new OAuth provider is as simple as submiting a pull request to our fork at <a href="https://github.com/concourse/dex">concourse/dex</a> and then adding a bit of configuration to <a href="https://github.com/concourse/skymarshal">concourse/skymarshal</a>.</p>

  
    
  
</div>
    
  
</div>
    
      <div class="section" id="section_cluster">
  
  <h2 class="section-header"><a name="cluster"></a>Multi-node Cluster</h2>
  

  <p>Beyond <code>quickstart</code>, the Concourse binary includes separate commands for running a multi-node cluster. This is necessary for either high-availability or just being able to run things across more than one worker.</p>

  
    
      <div class="section" id="section_generating-keys">
  
  <h3 class="section-header"><a name="generating-keys"></a>Generating Keys</h3>
  

  <p>First, you&#39;ll need to generate 3 private keys (well, 2, plus 1 for each worker):</p><dl>
  
  <dt><code>session_signing_key</code> (currently must be RSA)</dt>
    <dd><p>Used for signing user session tokens, and by the TSA to sign its own tokens in the requests it makes to the ATC.</p></dd>
  
  <dt><code>tsa_host_key</code></dt>
    <dd><p>Used for the TSA&#39;s SSH server. This is the key whose fingerprint you see when the <code>ssh</code> command warns you when connecting to a host it hasn&#39;t seen before.</p></dd>
  
  <dt><code>worker_key</code> (one per worker)</dt>
    <dd><p>Used for authorizing worker registration. There can actually be an arbitrary number of these keys; they are just listed to authorize worker SSH access.</p></dd>
  
</dl><p>To generate these keys, run:</p><div class="highlight"><pre style="">ssh-keygen -t rsa -f tsa_host_key -N <span style="color:#e74c3c">&#39;&#39;</span>
ssh-keygen -t rsa -f worker_key -N <span style="color:#e74c3c">&#39;&#39;</span>
ssh-keygen -t rsa -f session_signing_key -N <span style="color:#e74c3c">&#39;&#39;</span>
</pre>
</div><p>...and we&#39;ll also start on an <code>authorized_keys</code> file, currently listing this initial worker key:</p><div class="highlight"><pre style="">cp worker_key.pub authorized_worker_keys
</pre>
</div>

  
    
  
</div>
    
      <div class="section" id="section_running-web-nodes">
  
  <h3 class="section-header"><a name="running-web-nodes"></a>Running <code>web</code> Nodes</h3>
  

  <p>The <code>concourse</code> binary can run a <a href="topology.html#web-node"><code>web</code> node</a> via the <code>web</code> subcommand, like so:</p><div class="highlight"><pre style="">concourse web <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --add-local-user myuser:mypass <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-local-user myuser <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --session-signing-key session_signing_key <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --tsa-host-key tsa_host_key <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --tsa-authorized-keys authorized_worker_keys <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --external-url http://my-ci.example.com
</pre>
</div><p>Just as with <a href="install.html#quickstart">Quick Start</a>, this example is configuring local auth for the <a href="main-team.html"><code>main</code> team</a>, and assumes a local PostgreSQL server. You&#39;ll want to consult <code>concourse web --help</code> for more configuration options.</p><p>The <a href="topology.html#web-node"><code>web</code> node</a> can be scaled up for high availability, and they&#39;ll also roughly share their scheduling workloads, using the database to synchronize. This is done by just running more <code>web</code> commands on different machines, and optionally putting them behind a load balancer.</p><p>To run a cluster of <a href="topology.html#web-node"><code>web</code> node</a>s, you&#39;ll just need to pass the following flags:</p><ul>

  <li><p>The <code>--postgres-*</code> flags must all be set to the same database.</p></li>

  <li><p>The <code>--peer-url</code> flag must be specified as a URL used to reach the individual <a href="topology.html#web-node"><code>web</code> node</a>, from other <code>web</code> nodes. So this just has to be a URL reachable within their private network, e.g. a <code>10.x.x.x</code> address.</p></li>

  <li><p>The <code>--external-url</code> should be the URL used to reach <em>any</em> ATC, i.e. the URL pointing to your load balancer.</p></li>

</ul><p>For example:</p><p>Node 0:</p><div class="highlight"><pre style="">concourse web <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --add-local-user myuser:mypass <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-local-user myuser <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --session-signing-key session_signing_key <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --tsa-host-key tsa_host_key <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --tsa-authorized-keys authorized_worker_keys <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --postgres-host <span style="color:#1abc9c;font-weight:bold">10</span>.0.32.0 <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --postgres-user user <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --postgres-password pass <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --postgres-database concourse <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --external-url https://ci.example.com <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --peer-url http://10.0.16.10:8080
</pre>
</div><p>Node 1 (only difference is <code>--peer-url</code>):</p><div class="highlight"><pre style="">concourse web <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --add-local-user myuser:mypass <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --main-team-local-user myuser <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --session-signing-key session_signing_key <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --tsa-host-key tsa_host_key <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --tsa-authorized-keys authorized_worker_keys <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --postgres-host <span style="color:#1abc9c;font-weight:bold">10</span>.0.32.0 <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --postgres-user user <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --postgres-password pass <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --postgres-database concourse <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --external-url https://ci.example.com <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --peer-url http://10.0.16.11:8080
</pre>
</div>

  
    
  
</div>
    
      <div class="section" id="section_standalone-workers">
  
  <h3 class="section-header"><a name="standalone-workers"></a>Running <code>worker</code> Nodes</h3>
  

  <p>The <code>concourse</code> binary can run a <a href="topology.html#worker-node"><code>worker</code> node</a> via the <code>worker</code> subcommand, like so:</p><div class="highlight"><pre style="">sudo concourse worker <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --work-dir /opt/concourse/worker <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --tsa-host <span style="color:#1abc9c;font-weight:bold">127</span>.0.0.1:2222 <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --tsa-public-key tsa_host_key.pub <span style="color:#3498db">\
</span><span style="color:#3498db"></span>  --tsa-worker-private-key worker_key
</pre>
</div><p>Note that the worker must be run as <code>root</code>, as it orchestrates containers.</p><p>You may want a few workers, depending on the resource usage of your pipeline. There should be one per machine; running multiple on one box doesn&#39;t really make sense, as each worker runs as many containers as Concourse requests of it.</p><p>The <code>--work-dir</code> flag specifies where container data should be placed. Make sure it has plenty of disk space available, as it&#39;s where all the disk usage across your builds and resources will end up.</p><p>The <code>--tsa-host</code> refers to wherever the TSA on your <a href="topology.html#web-node"><code>web</code> node</a> is listening. This may be an address to a load balancer if you&#39;re running multiple <code>web</code> nodes, or just a local address like <code>127.0.0.1:2222</code> if you&#39;re running everything on one box.</p><p>The <code>--tsa-public-key</code> flag is used to ensure we&#39;re connecting to the TSA we should be connecting to, and is used like <code>known_hosts</code> with the <code>ssh</code> command. Refer to <a href="install.html#generating-keys">Generating Keys</a> if you&#39;re not sure what this means.</p><p>The <code>--tsa-worker-private-key</code> flag specifies the key to use when authenticating to the TSA. Refer to <a href="install.html#generating-keys">Generating Keys</a> if you&#39;re not sure what this means.</p><p>Workers have a statically configured <code>platform</code> and a set of <code>tags</code>, both of which determine where steps in a <a href="steps.html">Build Plan</a> are scheduled.</p><p>The Linux <code>concourse</code> binary comes with <a href="included-resources.html">a set of core resource types</a> baked in. If you are planning to use them you need to have at least one Linux worker.</p>

  
    
  
</div>
    
      <div class="section" id="section_community-installation">
  
  <h3 class="section-header"><a name="community-installation"></a>Community Installation Tools</h3>
  

  <div class="warning">
  <p>These are installation tools built by the community. Use at your own risk!</p>
</div><p><a href="https://github.com/EngineerBetter/concourse-up">Concourse Up</a> by <a href="http://github.com/EngineerBetter"><strong>@EngineerBetter</strong></a>. A tool for easily deploying Concourse in a single command.</p><p><a href="https://github.com/kubernetes/charts/tree/master/stable/concourse">Concourse Helm Chart</a>. The latest stable Helm chart for deploying Concourse into k8s. <strong>Official support coming soon.</strong></p><p><a href="https://github.com/marco-m/concourse-ci-formula">Concourse Formula</a> by <a href="http://github.com/marco-m"><strong>@marco-m</strong></a>. All-in-one Concourse installation using Vagrant and Virutalbox with S3-compatible storage and Vault secret manager.</p><p><a href="https://github.com/starkandwayne/bucc">BUCC</a> by <a href="http://github.com/starkandwayne"><strong>@starkandwayne</strong></a>. The <code>bucc</code> command line utility allows for easy bootstrapping of the BUCC stack (BOSH UA Credhub and Concourse). Which is the starting point for many deployments.</p>

  
    
  
</div>
    
  
</div>
    
  
</div>
      </div>
      
    </div>
  </body>
</html>